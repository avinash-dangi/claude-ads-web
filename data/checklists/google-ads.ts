import { AuditCheck, AuditCategory, PlatformAudit } from '@/types/audit';

export const googleAdsCategories: AuditCategory[] = [
  {
    name: 'Conversion Tracking',
    weight: 0.25,
    checkCount: 11,
    description: 'Conversion tracking setup and accuracy',
  },
  {
    name: 'Wasted Spend / Negatives',
    weight: 0.20,
    checkCount: 8,
    description: 'Budget efficiency and negative keywords',
  },
  {
    name: 'Account Structure',
    weight: 0.15,
    checkCount: 12,
    description: 'Campaign and ad group organization',
  },
  {
    name: 'Keywords & Quality Score',
    weight: 0.15,
    checkCount: 8,
    description: 'Keyword quality and relevance',
  },
  {
    name: 'Ads & Assets',
    weight: 0.15,
    checkCount: 12,
    description: 'Ad copy and creative assets',
  },
  {
    name: 'Settings & Targeting',
    weight: 0.10,
    checkCount: 12,
    description: 'Campaign settings and targeting options',
  },
  {
    name: 'Performance Max',
    weight: 0,
    checkCount: 5,
    description: 'PMax-specific checks (scored within Ads & Assets)',
  },
];

export const googleAdsChecks: AuditCheck[] = [
  // Conversion Tracking (25% weight)
  {
    id: 'G42',
    check: 'Conversion actions defined',
    severity: 'critical',
    category: 'Conversion Tracking',
    pass: '≥1 primary conversion action configured',
    warning: '—',
    fail: 'No active conversion actions',
  },
  {
    id: 'G43',
    check: 'Enhanced conversions enabled',
    severity: 'critical',
    category: 'Conversion Tracking',
    pass: 'Enhanced conversions active for primary conversions',
    warning: 'Enabled but not verified',
    fail: 'Not enabled',
  },
  {
    id: 'G44',
    check: 'Server-side tracking',
    severity: 'high',
    category: 'Conversion Tracking',
    pass: 'Server-side GTM or Google Ads API conversion import active',
    warning: 'Planned but not deployed',
    fail: 'No server-side tracking',
  },
  {
    id: 'G45',
    check: 'Consent Mode v2 (EU/EEA)',
    severity: 'critical',
    category: 'Conversion Tracking',
    pass: 'Consent Mode v2 implemented with Advanced mode',
    warning: 'Basic mode only',
    fail: 'Not implemented (if serving EU/EEA)',
  },
  {
    id: 'G46',
    check: 'Conversion window appropriate',
    severity: 'medium',
    category: 'Conversion Tracking',
    pass: 'Window matches sales cycle (7d ecom, 30-90d B2B, 30d lead gen)',
    warning: 'Default 30d without validation',
    fail: 'Window mismatched to sales cycle',
  },
  {
    id: 'G47',
    check: 'Micro vs macro separation',
    severity: 'high',
    category: 'Conversion Tracking',
    pass: 'Only macro conversions (Purchase, Lead) set as "Primary" for bidding',
    warning: 'Some micro events as Primary',
    fail: 'All events including micro (AddToCart, TimeOnSite) as Primary',
  },
  {
    id: 'G48',
    check: 'Attribution model',
    severity: 'medium',
    category: 'Conversion Tracking',
    pass: 'Data-driven attribution (DDA) selected',
    warning: 'Last Click (intentional)',
    fail: 'Rule-based model still active (deprecated Sep 2025)',
  },
  {
    id: 'G49',
    check: 'Conversion value assignment',
    severity: 'high',
    category: 'Conversion Tracking',
    pass: 'Dynamic values for ecom; value rules for lead gen',
    warning: 'Static values assigned',
    fail: 'No conversion values',
  },
  {
    id: 'G-CT1',
    check: 'No duplicate counting',
    severity: 'critical',
    category: 'Conversion Tracking',
    pass: 'GA4 + Google Ads not double-counting same conversion',
    warning: '—',
    fail: 'Both GA4 import and native tag counting same action',
  },
  {
    id: 'G-CT2',
    check: 'GA4 linked and flowing',
    severity: 'high',
    category: 'Conversion Tracking',
    pass: 'GA4 property linked, data flowing correctly',
    warning: 'Linked but data discrepancies',
    fail: 'Not linked',
  },
  {
    id: 'G-CT3',
    check: 'Google Tag firing',
    severity: 'critical',
    category: 'Conversion Tracking',
    pass: 'gtag.js or GTM firing correctly on all pages',
    warning: 'Firing on most pages (>90%)',
    fail: 'Tag missing or broken on key pages',
  },

  // Wasted Spend / Negatives (20% weight)
  {
    id: 'G13',
    check: 'Search term audit recency',
    severity: 'critical',
    category: 'Wasted Spend / Negatives',
    pass: 'Search terms reviewed within last 14 days',
    warning: 'Reviewed within 30 days',
    fail: 'Not reviewed in >30 days',
  },
  {
    id: 'G14',
    check: 'Negative keyword lists exist',
    severity: 'critical',
    category: 'Wasted Spend / Negatives',
    pass: '≥3 theme-based lists (Competitor, Jobs, Free, Irrelevant)',
    warning: '1-2 lists exist',
    fail: 'No negative keyword lists',
  },
  {
    id: 'G15',
    check: 'Account-level negatives applied',
    severity: 'high',
    category: 'Wasted Spend / Negatives',
    pass: 'Negative lists applied at account or all-campaign level',
    warning: 'Applied to some campaigns only',
    fail: 'Not applied',
  },
  {
    id: 'G16',
    check: 'Wasted spend on irrelevant terms',
    severity: 'critical',
    category: 'Wasted Spend / Negatives',
    pass: '<5% of spend on irrelevant search terms (last 30d)',
    warning: '5-15% on irrelevant terms',
    fail: '>15% on irrelevant terms',
  },
  {
    id: 'G17',
    check: 'Broad match + smart bidding pairing',
    severity: 'critical',
    category: 'Wasted Spend / Negatives',
    pass: 'No Broad Match keywords running on Manual CPC',
    warning: '—',
    fail: 'Broad Match + Manual CPC active',
  },
  {
    id: 'G18',
    check: 'Close variant pollution',
    severity: 'high',
    category: 'Wasted Spend / Negatives',
    pass: 'Exact/Phrase match not triggering irrelevant close variants',
    warning: 'Minor close variant issues',
    fail: 'Significant irrelevant close variant spend',
  },
  {
    id: 'G19',
    check: 'Search term visibility',
    severity: 'medium',
    category: 'Wasted Spend / Negatives',
    pass: '>60% of search term spend is visible (not hidden)',
    warning: '40-60% visible',
    fail: '<40% visible',
  },
  {
    id: 'G-WS1',
    check: 'Zero-conversion keywords',
    severity: 'high',
    category: 'Wasted Spend / Negatives',
    pass: 'No keywords with >100 clicks and 0 conversions',
    warning: '1-3 such keywords',
    fail: '>3 keywords with >100 clicks, 0 conversions',
  },

  // Account Structure (15% weight)
  {
    id: 'G01',
    check: 'Campaign naming convention',
    severity: 'medium',
    category: 'Account Structure',
    pass: 'Consistent pattern (e.g., [Brand]_[Type]_[Geo]_[Target])',
    warning: 'Partially consistent',
    fail: 'No naming convention',
  },
  {
    id: 'G02',
    check: 'Ad group naming convention',
    severity: 'medium',
    category: 'Account Structure',
    pass: 'Matches campaign naming pattern',
    warning: 'Partially consistent',
    fail: 'No naming convention',
  },
  {
    id: 'G03',
    check: 'Single theme ad groups',
    severity: 'high',
    category: 'Account Structure',
    pass: 'Each ad group targets 1 keyword theme (≤10 keywords)',
    warning: '11-20 keywords with consistent theme',
    fail: 'Ad groups with 20+ unrelated keywords (theme drift)',
  },
  {
    id: 'G04',
    check: 'Campaign count per objective',
    severity: 'high',
    category: 'Account Structure',
    pass: '≤5 campaigns per funnel stage/objective',
    warning: '6-8 campaigns per objective',
    fail: '>8 campaigns per objective (fragmented)',
  },
  {
    id: 'G05',
    check: 'Brand vs Non-Brand separation',
    severity: 'critical',
    category: 'Account Structure',
    pass: 'Brand and non-brand in separate campaigns',
    warning: '—',
    fail: 'Brand and non-brand mixed in same campaign',
  },
  {
    id: 'G06',
    check: 'PMax present for eligible accounts',
    severity: 'medium',
    category: 'Account Structure',
    pass: 'PMax active for accounts with conversion history',
    warning: 'PMax tested but paused',
    fail: 'No PMax tested despite eligibility',
  },
  {
    id: 'G07',
    check: 'Search + PMax overlap',
    severity: 'high',
    category: 'Account Structure',
    pass: 'Brand exclusions configured in PMax when Search brand campaign exists',
    warning: 'Partial brand exclusions',
    fail: 'No brand exclusions in PMax alongside brand Search',
  },
  {
    id: 'G08',
    check: 'Budget allocation matches priority',
    severity: 'high',
    category: 'Account Structure',
    pass: 'Top-performing campaigns not budget-limited',
    warning: 'Minor budget constraints on top performers',
    fail: 'Top performers severely budget-limited',
  },
  {
    id: 'G09',
    check: 'Campaign daily budget vs spend',
    severity: 'medium',
    category: 'Account Structure',
    pass: 'No campaigns hitting budget cap before 6PM',
    warning: '1-2 campaigns hitting cap early',
    fail: 'Multiple campaigns capped before noon',
  },
  {
    id: 'G10',
    check: 'Ad schedule configured',
    severity: 'low',
    category: 'Account Structure',
    pass: 'Ad schedule set if business has operating hours',
    warning: '—',
    fail: 'No schedule despite clear business hours',
  },
  {
    id: 'G11',
    check: 'Geographic targeting accuracy',
    severity: 'high',
    category: 'Account Structure',
    pass: '"People in" (not "People in or interested in") for local',
    warning: '—',
    fail: '"People in or interested in" for local business',
  },
  {
    id: 'G12',
    check: 'Network settings',
    severity: 'high',
    category: 'Account Structure',
    pass: 'Search Partners and Display Network disabled for Search (unless intentional)',
    warning: 'Search Partners ON (monitored)',
    fail: 'Display Network ON for Search campaign',
  },

  // Keywords & Quality Score (15% weight)
  {
    id: 'G20',
    check: 'Average Quality Score',
    severity: 'high',
    category: 'Keywords & Quality Score',
    pass: 'Account-wide impression-weighted QS ≥7',
    warning: 'QS 5-6',
    fail: 'QS ≤4',
  },
  {
    id: 'G21',
    check: 'Critical QS keywords',
    severity: 'critical',
    category: 'Keywords & Quality Score',
    pass: '<10% of keywords with QS ≤3',
    warning: '10-25% with QS ≤3',
    fail: '>25% with QS ≤4',
  },
  {
    id: 'G22',
    check: 'Expected CTR component',
    severity: 'high',
    category: 'Keywords & Quality Score',
    pass: '<20% of keywords with "Below Average" expected CTR',
    warning: '20-35% Below Average',
    fail: '>35% Below Average',
  },
  {
    id: 'G23',
    check: 'Ad relevance component',
    severity: 'high',
    category: 'Keywords & Quality Score',
    pass: '<20% of keywords with "Below Average" ad relevance',
    warning: '20-35% Below Average',
    fail: '>35% Below Average',
  },
  {
    id: 'G24',
    check: 'Landing page experience',
    severity: 'high',
    category: 'Keywords & Quality Score',
    pass: '<15% of keywords with "Below Average" landing page exp.',
    warning: '15-30% Below Average',
    fail: '>30% Below Average',
  },
  {
    id: 'G25',
    check: 'Top keyword QS',
    severity: 'medium',
    category: 'Keywords & Quality Score',
    pass: 'Top 20 spend keywords all have QS ≥7',
    warning: 'Some top keywords at QS 5-6',
    fail: 'Top keywords with QS ≤4',
  },
  {
    id: 'G-KW1',
    check: 'Zero-impression keywords',
    severity: 'medium',
    category: 'Keywords & Quality Score',
    pass: 'No keywords with 0 impressions in last 30 days',
    warning: '<10% zero-impression',
    fail: '>10% of keywords with 0 impressions',
  },
  {
    id: 'G-KW2',
    check: 'Keyword-to-ad relevance',
    severity: 'high',
    category: 'Keywords & Quality Score',
    pass: 'Headlines contain primary keyword variants',
    warning: 'Partial keyword inclusion',
    fail: 'No keyword variants in ad headlines',
  },

  // Ads & Assets (15% weight)
  {
    id: 'G26',
    check: 'RSA per ad group',
    severity: 'high',
    category: 'Ads & Assets',
    pass: '≥1 RSA per ad group (≥2 recommended)',
    warning: '1 RSA per ad group',
    fail: 'Ad groups without any RSA',
  },
  {
    id: 'G27',
    check: 'RSA headline count',
    severity: 'high',
    category: 'Ads & Assets',
    pass: '≥8 unique headlines per RSA (ideal: 12-15)',
    warning: '3-7 headlines',
    fail: '<3 headlines',
  },
  {
    id: 'G28',
    check: 'RSA description count',
    severity: 'medium',
    category: 'Ads & Assets',
    pass: '≥3 descriptions per RSA (ideal: 4)',
    warning: '2 descriptions',
    fail: '<2 descriptions',
  },
  {
    id: 'G29',
    check: 'RSA Ad Strength',
    severity: 'high',
    category: 'Ads & Assets',
    pass: 'All RSAs "Good" or "Excellent"',
    warning: 'Some "Average"',
    fail: 'Any RSA with "Poor" Ad Strength',
  },
  {
    id: 'G30',
    check: 'RSA pinning strategy',
    severity: 'medium',
    category: 'Ads & Assets',
    pass: 'Strategic pinning (1-2 positions, 2-3 variants each)',
    warning: 'Over-pinned (all positions)',
    fail: '—',
  },
  {
    id: 'G31',
    check: 'PMax asset group density',
    severity: 'critical',
    category: 'Ads & Assets',
    pass: '≥20 images, ≥5 logos, ≥5 videos per group (maximum density)',
    warning: '5-19 images, 1-4 logos, or 1-4 videos',
    fail: '<5 images OR 0 logos OR 0 video',
  },
  {
    id: 'G32',
    check: 'PMax video assets present',
    severity: 'high',
    category: 'Ads & Assets',
    pass: 'Native video in all formats (16:9, 1:1, 9:16)',
    warning: '1-2 formats only',
    fail: 'No native video (auto-generated only)',
  },
  {
    id: 'G33',
    check: 'PMax asset group count',
    severity: 'medium',
    category: 'Ads & Assets',
    pass: '≥2 asset groups per PMax (intent-segmented)',
    warning: '1 asset group',
    fail: '—',
  },
  {
    id: 'G34',
    check: 'PMax final URL expansion',
    severity: 'high',
    category: 'Ads & Assets',
    pass: 'Configured intentionally (ON for discovery, OFF for control)',
    warning: '—',
    fail: 'Default ON without review',
  },
  {
    id: 'G35',
    check: 'Ad copy relevance to keywords',
    severity: 'high',
    category: 'Ads & Assets',
    pass: 'Headlines contain primary keyword variants',
    warning: 'Partial keyword inclusion',
    fail: 'No keyword relevance in headlines',
  },
  {
    id: 'G-AD1',
    check: 'Ad freshness',
    severity: 'medium',
    category: 'Ads & Assets',
    pass: 'New ad copy tested within last 90 days',
    warning: '—',
    fail: 'No new ads in >90 days',
  },
  {
    id: 'G-AD2',
    check: 'CTR vs industry benchmark',
    severity: 'high',
    category: 'Ads & Assets',
    pass: 'CTR ≥ industry average',
    warning: 'CTR 50-100% of industry average',
    fail: 'CTR <50% of industry average',
  },

  // Settings & Targeting (10% weight)
  {
    id: 'G50',
    check: 'Sitelink extensions',
    severity: 'high',
    category: 'Settings & Targeting',
    pass: '≥4 sitelinks per campaign',
    warning: '1-3 sitelinks',
    fail: 'No sitelinks',
  },
  {
    id: 'G51',
    check: 'Callout extensions',
    severity: 'medium',
    category: 'Settings & Targeting',
    pass: '≥4 callouts per campaign',
    warning: '1-3 callouts',
    fail: 'No callouts',
  },
  {
    id: 'G52',
    check: 'Structured snippets',
    severity: 'medium',
    category: 'Settings & Targeting',
    pass: '≥1 structured snippet set',
    warning: '—',
    fail: 'No structured snippets',
  },
  {
    id: 'G53',
    check: 'Image extensions',
    severity: 'medium',
    category: 'Settings & Targeting',
    pass: 'Image extensions active for search campaigns',
    warning: '—',
    fail: 'No image extensions',
  },
  {
    id: 'G54',
    check: 'Call extensions (if applicable)',
    severity: 'medium',
    category: 'Settings & Targeting',
    pass: 'Call extensions with call tracking for phone-based businesses',
    warning: 'Call extension without tracking',
    fail: 'No call extension for phone-based business',
  },
  {
    id: 'G55',
    check: 'Lead form extensions',
    severity: 'low',
    category: 'Settings & Targeting',
    pass: 'Lead form tested for lead gen accounts',
    warning: '—',
    fail: 'Not tested',
  },
  {
    id: 'G56',
    check: 'Audience segments applied',
    severity: 'high',
    category: 'Settings & Targeting',
    pass: 'Remarketing + in-market audiences in Observation mode',
    warning: 'Some audiences applied',
    fail: 'No audience signals',
  },
  {
    id: 'G57',
    check: 'Customer Match lists',
    severity: 'high',
    category: 'Settings & Targeting',
    pass: 'Customer Match list uploaded, refreshed <30 days',
    warning: 'List >30 days old',
    fail: 'No Customer Match lists',
  },
  {
    id: 'G58',
    check: 'Placement exclusions',
    severity: 'high',
    category: 'Settings & Targeting',
    pass: 'Account-level placement exclusions (games, apps, MFA sites)',
    warning: 'Campaign-level only',
    fail: 'No placement exclusions',
  },
  {
    id: 'G59',
    check: 'Landing page mobile speed',
    severity: 'high',
    category: 'Settings & Targeting',
    pass: 'Mobile LCP <2.5s (ideal <2.0s)',
    warning: 'LCP 2.5-4.0s',
    fail: 'LCP >4.0s',
  },
  {
    id: 'G60',
    check: 'Landing page relevance',
    severity: 'high',
    category: 'Settings & Targeting',
    pass: 'Landing page H1/title matches ad group theme',
    warning: 'Partial relevance',
    fail: 'No relevance to ad group',
  },
  {
    id: 'G61',
    check: 'Landing page schema markup',
    severity: 'medium',
    category: 'Settings & Targeting',
    pass: 'Product/FAQ/Service schema present',
    warning: '—',
    fail: 'No schema markup',
  },

  // Performance Max Extended (scored within Ads & Assets)
  {
    id: 'G-PM1',
    check: 'Audience signals configured',
    severity: 'high',
    category: 'Performance Max',
    pass: 'Custom audience signals per asset group',
    warning: 'Generic signals only',
    fail: 'No audience signals',
  },
  {
    id: 'G-PM2',
    check: 'PMax Ad Strength',
    severity: 'high',
    category: 'Performance Max',
    pass: '"Good" or "Excellent"',
    warning: '"Average"',
    fail: '"Poor"',
  },
  {
    id: 'G-PM3',
    check: 'Brand cannibalization',
    severity: 'high',
    category: 'Performance Max',
    pass: '<15% of PMax conversions from brand terms',
    warning: '15-30% from brand terms',
    fail: '>30% from brand terms',
  },
  {
    id: 'G-PM4',
    check: 'Search themes',
    severity: 'medium',
    category: 'Performance Max',
    pass: 'Search themes configured (up to 50 per asset group)',
    warning: '<5 search themes',
    fail: 'No search themes',
  },
  {
    id: 'G-PM5',
    check: 'Negative keywords',
    severity: 'high',
    category: 'Performance Max',
    pass: 'Brand + irrelevant negatives applied (up to 10,000)',
    warning: 'Some negatives applied',
    fail: 'No negative keywords in PMax',
  },
];

export const googleAdsAudit: PlatformAudit = {
  platform: 'Google Ads',
  totalChecks: 74,
  categories: googleAdsCategories,
  checks: googleAdsChecks,
};
